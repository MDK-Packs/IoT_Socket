<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>IoT Socket: IoT Socket Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<script type="text/javascript" src="footer.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="$extra_stylesheet" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><img alt="Logo" src="armkeil_white_h.png"/></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">IoT Socket
   &#160;<span id="projectnumber">Version 1.3.0</span>
   </div>
   <div id="projectbrief">Simple IP Socket (BSD like)</div>
  </td>
  <!--END !PROJECT_NAME-->
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="Compnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__iotSocketAPI.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">IoT Socket Functions</div></div>
</div><!--header-->
<div class="contents">

<p>List of IoT Socket API functions.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac758b9287fb2121fb7067811aa7257b2"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iotSocketAPI.html#gac758b9287fb2121fb7067811aa7257b2">iotSocketCreate</a> (int32_t af, int32_t type, int32_t protocol)</td></tr>
<tr class="memdesc:gac758b9287fb2121fb7067811aa7257b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a communication socket.  <a href="group__iotSocketAPI.html#gac758b9287fb2121fb7067811aa7257b2">More...</a><br /></td></tr>
<tr class="separator:gac758b9287fb2121fb7067811aa7257b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae38f9306e4e99a89785ce037ea7c8e80"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iotSocketAPI.html#gae38f9306e4e99a89785ce037ea7c8e80">iotSocketBind</a> (int32_t socket, const uint8_t *ip, uint32_t ip_len, uint16_t port)</td></tr>
<tr class="memdesc:gae38f9306e4e99a89785ce037ea7c8e80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assign a local address to a socket.  <a href="group__iotSocketAPI.html#gae38f9306e4e99a89785ce037ea7c8e80">More...</a><br /></td></tr>
<tr class="separator:gae38f9306e4e99a89785ce037ea7c8e80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1c34f803e04b807a7b7f895611702f75"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iotSocketAPI.html#ga1c34f803e04b807a7b7f895611702f75">iotSocketListen</a> (int32_t socket, int32_t backlog)</td></tr>
<tr class="memdesc:ga1c34f803e04b807a7b7f895611702f75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Listen for socket connections.  <a href="group__iotSocketAPI.html#ga1c34f803e04b807a7b7f895611702f75">More...</a><br /></td></tr>
<tr class="separator:ga1c34f803e04b807a7b7f895611702f75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga17ae1084ed6c232ef0c78af37ef66e58"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iotSocketAPI.html#ga17ae1084ed6c232ef0c78af37ef66e58">iotSocketAccept</a> (int32_t socket, uint8_t *ip, uint32_t *ip_len, uint16_t *port)</td></tr>
<tr class="memdesc:ga17ae1084ed6c232ef0c78af37ef66e58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Accept a new connection on a socket.  <a href="group__iotSocketAPI.html#ga17ae1084ed6c232ef0c78af37ef66e58">More...</a><br /></td></tr>
<tr class="separator:ga17ae1084ed6c232ef0c78af37ef66e58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga51dba6e1df39d9d044d5557e0bfcf5cb"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iotSocketAPI.html#ga51dba6e1df39d9d044d5557e0bfcf5cb">iotSocketConnect</a> (int32_t socket, const uint8_t *ip, uint32_t ip_len, uint16_t port)</td></tr>
<tr class="memdesc:ga51dba6e1df39d9d044d5557e0bfcf5cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect a socket to a remote host.  <a href="group__iotSocketAPI.html#ga51dba6e1df39d9d044d5557e0bfcf5cb">More...</a><br /></td></tr>
<tr class="separator:ga51dba6e1df39d9d044d5557e0bfcf5cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9b71bd827a43f2fed4331e8087915689"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iotSocketAPI.html#ga9b71bd827a43f2fed4331e8087915689">iotSocketRecv</a> (int32_t socket, void *buf, uint32_t len)</td></tr>
<tr class="memdesc:ga9b71bd827a43f2fed4331e8087915689"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive data or check if data is available on a connected socket.  <a href="group__iotSocketAPI.html#ga9b71bd827a43f2fed4331e8087915689">More...</a><br /></td></tr>
<tr class="separator:ga9b71bd827a43f2fed4331e8087915689"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7089918987d66d706e3733764e6bb44a"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iotSocketAPI.html#ga7089918987d66d706e3733764e6bb44a">iotSocketRecvFrom</a> (int32_t socket, void *buf, uint32_t len, uint8_t *ip, uint32_t *ip_len, uint16_t *port)</td></tr>
<tr class="memdesc:ga7089918987d66d706e3733764e6bb44a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive data or check if data is available on a socket.  <a href="group__iotSocketAPI.html#ga7089918987d66d706e3733764e6bb44a">More...</a><br /></td></tr>
<tr class="separator:ga7089918987d66d706e3733764e6bb44a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad00cb6fec02a5458ace3702b2725a110"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iotSocketAPI.html#gad00cb6fec02a5458ace3702b2725a110">iotSocketSend</a> (int32_t socket, const void *buf, uint32_t len)</td></tr>
<tr class="memdesc:gad00cb6fec02a5458ace3702b2725a110"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send data or check if data can be sent on a connected socket.  <a href="group__iotSocketAPI.html#gad00cb6fec02a5458ace3702b2725a110">More...</a><br /></td></tr>
<tr class="separator:gad00cb6fec02a5458ace3702b2725a110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3a6eef425315dfbe235ce8200c01e122"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iotSocketAPI.html#ga3a6eef425315dfbe235ce8200c01e122">iotSocketSendTo</a> (int32_t socket, const void *buf, uint32_t len, const uint8_t *ip, uint32_t ip_len, uint16_t port)</td></tr>
<tr class="memdesc:ga3a6eef425315dfbe235ce8200c01e122"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send data or check if data can be sent on a socket.  <a href="group__iotSocketAPI.html#ga3a6eef425315dfbe235ce8200c01e122">More...</a><br /></td></tr>
<tr class="separator:ga3a6eef425315dfbe235ce8200c01e122"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabd13e6f8fc094926809e789274f08dfe"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iotSocketAPI.html#gabd13e6f8fc094926809e789274f08dfe">iotSocketGetSockName</a> (int32_t socket, uint8_t *ip, uint32_t *ip_len, uint16_t *port)</td></tr>
<tr class="memdesc:gabd13e6f8fc094926809e789274f08dfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve local IP address and port of a socket.  <a href="group__iotSocketAPI.html#gabd13e6f8fc094926809e789274f08dfe">More...</a><br /></td></tr>
<tr class="separator:gabd13e6f8fc094926809e789274f08dfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga251ae2c799a0eddd122fc1bf530ad7be"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iotSocketAPI.html#ga251ae2c799a0eddd122fc1bf530ad7be">iotSocketGetPeerName</a> (int32_t socket, uint8_t *ip, uint32_t *ip_len, uint16_t *port)</td></tr>
<tr class="memdesc:ga251ae2c799a0eddd122fc1bf530ad7be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve remote IP address and port of a socket.  <a href="group__iotSocketAPI.html#ga251ae2c799a0eddd122fc1bf530ad7be">More...</a><br /></td></tr>
<tr class="separator:ga251ae2c799a0eddd122fc1bf530ad7be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga22311af9784ef6317ce092ccf392d049"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iotSocketAPI.html#ga22311af9784ef6317ce092ccf392d049">iotSocketGetOpt</a> (int32_t socket, int32_t opt_id, void *opt_val, uint32_t *opt_len)</td></tr>
<tr class="memdesc:ga22311af9784ef6317ce092ccf392d049"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get socket option.  <a href="group__iotSocketAPI.html#ga22311af9784ef6317ce092ccf392d049">More...</a><br /></td></tr>
<tr class="separator:ga22311af9784ef6317ce092ccf392d049"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa6b5735b9bc67859126535b09f81f664"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iotSocketAPI.html#gaa6b5735b9bc67859126535b09f81f664">iotSocketSetOpt</a> (int32_t socket, int32_t opt_id, const void *opt_val, uint32_t opt_len)</td></tr>
<tr class="memdesc:gaa6b5735b9bc67859126535b09f81f664"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set socket option.  <a href="group__iotSocketAPI.html#gaa6b5735b9bc67859126535b09f81f664">More...</a><br /></td></tr>
<tr class="separator:gaa6b5735b9bc67859126535b09f81f664"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga59fffdd940edfecaf226f9a2bd130dca"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iotSocketAPI.html#ga59fffdd940edfecaf226f9a2bd130dca">iotSocketClose</a> (int32_t socket)</td></tr>
<tr class="memdesc:ga59fffdd940edfecaf226f9a2bd130dca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close and release a socket.  <a href="group__iotSocketAPI.html#ga59fffdd940edfecaf226f9a2bd130dca">More...</a><br /></td></tr>
<tr class="separator:ga59fffdd940edfecaf226f9a2bd130dca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1f60dda886640137dead0622fdff9a5e"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__iotSocketAPI.html#ga1f60dda886640137dead0622fdff9a5e">iotSocketGetHostByName</a> (const char *name, int32_t af, uint8_t *ip, uint32_t *ip_len)</td></tr>
<tr class="memdesc:ga1f60dda886640137dead0622fdff9a5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve host IP address from host name.  <a href="group__iotSocketAPI.html#ga1f60dda886640137dead0622fdff9a5e">More...</a><br /></td></tr>
<tr class="separator:ga1f60dda886640137dead0622fdff9a5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p >List of IoT Socket API functions. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gac758b9287fb2121fb7067811aa7257b2" name="gac758b9287fb2121fb7067811aa7257b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac758b9287fb2121fb7067811aa7257b2">&#9670;&nbsp;</a></span>iotSocketCreate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t iotSocketCreate </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>af</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>protocol</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a communication socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">af</td><td>address family. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>socket type. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">protocol</td><td>socket protocol. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status information:<ul>
<li>Socket identification number (&gt;=0).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gafe6eb756474b724046d6bd0803d3be16">IOT_SOCKET_EINVAL</a> = Invalid argument.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gaac9dd14cb3288f8e03a4e7a8ba25bfca">IOT_SOCKET_ENOTSUP</a> = Operation not supported.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga18b29b3b624796cd734b5b2c8feedf38">IOT_SOCKET_ENOMEM</a> = Not enough memory.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga82b741d2694c1955be09078780a34f5b">IOT_SOCKET_ERROR</a> = Unspecified error.</li>
</ul>
</dd></dl>
<p>The function <b>iotSocketCreate</b> creates a communication endpoint called a socket.</p>
<p >The argument <em>af</em> specifies the address family. The following values are supported: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Family   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group__iotSocketAddressFamily.html#ga25c1a75f47d88c653b35f084474d5537">IOT_SOCKET_AF_INET</a>   </td><td class="markdownTableBodyLeft">Address Family Internet    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group__iotSocketAddressFamily.html#ga12cc48c0257c8e3f9a422040fd963923">IOT_SOCKET_AF_INET6</a>   </td><td class="markdownTableBodyLeft">Address Family Internet version 6   </td></tr>
</table>
<p >The argument <em>type</em> specifies the communication semantics. The following are the currently supported types: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Type   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group__iotSocketType.html#gacbec51e70b70979a6d8e0f46e245c357">IOT_SOCKET_SOCK_STREAM</a>   </td><td class="markdownTableBodyLeft">Provides a reliable connection based data stream that is full-duplex    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group__iotSocketType.html#ga930c520d329bafc27847f5183a9f48ce">IOT_SOCKET_SOCK_DGRAM</a>   </td><td class="markdownTableBodyLeft">Provides connectionless communication that is unreliable   </td></tr>
</table>
<p >The argument <em>protocol</em> specifies the protocol that must be used with the socket type: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Protocol   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group__iotSocketProtocol.html#gac9e564c101a8b0669c6e54496cf75655">IOT_SOCKET_IPPROTO_TCP</a>   </td><td class="markdownTableBodyLeft">Must be used with <a class="el" href="group__iotSocketType.html#gacbec51e70b70979a6d8e0f46e245c357">IOT_SOCKET_SOCK_STREAM</a> socket type    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group__iotSocketProtocol.html#gad1f0810ffd16aaf73e25c54d1f2b7f53">IOT_SOCKET_IPPROTO_UDP</a>   </td><td class="markdownTableBodyLeft">Must be used with <a class="el" href="group__iotSocketType.html#ga930c520d329bafc27847f5183a9f48ce">IOT_SOCKET_SOCK_DGRAM</a> socket type   </td></tr>
</table>
<p ><b>Example:</b> </p><ul>
<li>see <a class="el" href="group__iotSocketAPI.html#ga1c34f803e04b807a7b7f895611702f75">iotSocketListen</a>, <a class="el" href="group__iotSocketAPI.html#ga51dba6e1df39d9d044d5557e0bfcf5cb">iotSocketConnect</a> </li>
</ul>

</div>
</div>
<a id="gae38f9306e4e99a89785ce037ea7c8e80" name="gae38f9306e4e99a89785ce037ea7c8e80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae38f9306e4e99a89785ce037ea7c8e80">&#9670;&nbsp;</a></span>iotSocketBind()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t iotSocketBind </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ip_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Assign a local address to a socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket identification number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ip</td><td>pointer to local IP address. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ip_len</td><td>length of 'ip' address in bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>local port number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status information:<ul>
<li>0 = Operation successful.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga9355dbc6232ba07c4ef2127289b2ed33">IOT_SOCKET_ESOCK</a> = Invalid socket.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gafe6eb756474b724046d6bd0803d3be16">IOT_SOCKET_EINVAL</a> = Invalid argument (address or socket already bound).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga7f0805f981cf4b5afa18f8a45d9638bb">IOT_SOCKET_EADDRINUSE</a> = Address already in use.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga82b741d2694c1955be09078780a34f5b">IOT_SOCKET_ERROR</a> = Unspecified error.</li>
</ul>
</dd></dl>
<p>The function <b>iotSocketBind</b> assigns a name to an unnamed socket. The name represents the local address and port of the communication endpoint.</p>
<p >The argument <em>socket</em> specifies a socket identification number returned from a previous call to <a class="el" href="group__iotSocketAPI.html#gac758b9287fb2121fb7067811aa7257b2">iotSocketCreate</a>.</p>
<p >The argument <em>ip</em> is a pointer to the buffer containing the IP address octets of the local IP address.</p>
<p >The argument <em>ip_len</em> specifies the length of the local IP address. The length is <span class="XML-Token">4</span> bytes for the IPv4 address and <span class="XML-Token">16</span> bytes for the IPv6 address.</p>
<p >The argument <em>port</em> specifies the local port. If the argument <em>port</em> is <span class="XML-Token">0</span>, the function returns error, because this port is reserved.</p>
<p ><b>Example:</b> </p><ul>
<li>see <a class="el" href="group__iotSocketAPI.html#ga1c34f803e04b807a7b7f895611702f75">iotSocketListen</a> </li>
</ul>

</div>
</div>
<a id="ga1c34f803e04b807a7b7f895611702f75" name="ga1c34f803e04b807a7b7f895611702f75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1c34f803e04b807a7b7f895611702f75">&#9670;&nbsp;</a></span>iotSocketListen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t iotSocketListen </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>backlog</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Listen for socket connections. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket identification number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">backlog</td><td>number of connection requests that can be queued. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status information:<ul>
<li>0 = Operation successful.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga9355dbc6232ba07c4ef2127289b2ed33">IOT_SOCKET_ESOCK</a> = Invalid socket.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gafe6eb756474b724046d6bd0803d3be16">IOT_SOCKET_EINVAL</a> = Invalid argument (socket not bound).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gaac9dd14cb3288f8e03a4e7a8ba25bfca">IOT_SOCKET_ENOTSUP</a> = Operation not supported.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gaff2ba06531a6c882932686bb2b6e3f34">IOT_SOCKET_EISCONN</a> = Socket is already connected.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga82b741d2694c1955be09078780a34f5b">IOT_SOCKET_ERROR</a> = Unspecified error.</li>
</ul>
</dd></dl>
<p>The function <b>iotSocketListen</b> sets the specified socket to listening mode, that is to the server mode of operation. Before calling the <b>iotSocketListen</b> function, the <a class="el" href="group__iotSocketAPI.html#gae38f9306e4e99a89785ce037ea7c8e80">iotSocketBind</a> function must be called.</p>
<p >The argument <em>socket</em> specifies a socket identification number returned from a previous call to <a class="el" href="group__iotSocketAPI.html#gac758b9287fb2121fb7067811aa7257b2">iotSocketCreate</a>.</p>
<p >The argument <em>backlog</em> specifies a maximum number of connection requests that can be queued.</p>
<p ><b>Example:</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> Echo_Server_Thread (<span class="keywordtype">void</span> *arg) {</div>
<div class="line">  uint8_t ip[4] = { 0U, 0U, 0U, 0U };</div>
<div class="line">  int32_t sock, sd, res;</div>
<div class="line">  <span class="keywordtype">char</span> dbuf[120];</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">while</span> (1) {</div>
<div class="line">    sock = <a class="code hl_function" href="group__iotSocketAPI.html#gac758b9287fb2121fb7067811aa7257b2" title="Create a communication socket.">iotSocketCreate</a> (<a class="code hl_define" href="group__iotSocketAddressFamily.html#ga25c1a75f47d88c653b35f084474d5537" title="IPv4.">IOT_SOCKET_AF_INET</a>, <a class="code hl_define" href="group__iotSocketType.html#gacbec51e70b70979a6d8e0f46e245c357" title="Stream socket.">IOT_SOCKET_SOCK_STREAM</a>, <a class="code hl_define" href="group__iotSocketProtocol.html#gac9e564c101a8b0669c6e54496cf75655" title="TCP.">IOT_SOCKET_IPPROTO_TCP</a>);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group__iotSocketAPI.html#gae38f9306e4e99a89785ce037ea7c8e80" title="Assign a local address to a socket.">iotSocketBind</a> (sock, (uint8_t *)ip, <span class="keyword">sizeof</span>(ip), 7U);</div>
<div class="line">    <a class="code hl_function" href="group__iotSocketAPI.html#ga1c34f803e04b807a7b7f895611702f75" title="Listen for socket connections.">iotSocketListen</a> (sock, 1);</div>
<div class="line">    sd = <a class="code hl_function" href="group__iotSocketAPI.html#ga17ae1084ed6c232ef0c78af37ef66e58" title="Accept a new connection on a socket.">iotSocketAccept</a> (sock, NULL, NULL, NULL);</div>
<div class="line">    <a class="code hl_function" href="group__iotSocketAPI.html#ga59fffdd940edfecaf226f9a2bd130dca" title="Close and release a socket.">iotSocketClose</a> (sock);</div>
<div class="line">    sock = sd;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">      res = <a class="code hl_function" href="group__iotSocketAPI.html#ga9b71bd827a43f2fed4331e8087915689" title="Receive data or check if data is available on a connected socket.">iotSocketRecv</a> (sock, dbuf, <span class="keyword">sizeof</span>(dbuf));</div>
<div class="line">      <span class="keywordflow">if</span> (res &lt; 0) {</div>
<div class="line">        <span class="keywordflow">break</span>;                                      <span class="comment">// Error occurred</span></div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">if</span> (res &gt; 0) {</div>
<div class="line">        <a class="code hl_function" href="group__iotSocketAPI.html#gad00cb6fec02a5458ace3702b2725a110" title="Send data or check if data can be sent on a connected socket.">iotSocketSend</a> (sock, dbuf, res);            <span class="comment">// Echo the data</span></div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <a class="code hl_function" href="group__iotSocketAPI.html#ga59fffdd940edfecaf226f9a2bd130dca" title="Close and release a socket.">iotSocketClose</a> (sock);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga17ae1084ed6c232ef0c78af37ef66e58" name="ga17ae1084ed6c232ef0c78af37ef66e58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga17ae1084ed6c232ef0c78af37ef66e58">&#9670;&nbsp;</a></span>iotSocketAccept()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t iotSocketAccept </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>ip_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Accept a new connection on a socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket identification number. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ip</td><td>pointer to buffer where address of connecting socket shall be returned (NULL for none). </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ip_len</td><td>pointer to length of 'ip' (or NULL if 'ip' is NULL):<ul>
<li>length of supplied 'ip' on input.</li>
<li>length of stored 'ip' on output. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">port</td><td>pointer to buffer where port of connecting socket shall be returned (NULL for none). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status information:<ul>
<li>socket identification number of accepted socket (&gt;=0).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga9355dbc6232ba07c4ef2127289b2ed33">IOT_SOCKET_ESOCK</a> = Invalid socket.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gafe6eb756474b724046d6bd0803d3be16">IOT_SOCKET_EINVAL</a> = Invalid argument (socket not in listen mode).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gaac9dd14cb3288f8e03a4e7a8ba25bfca">IOT_SOCKET_ENOTSUP</a> = Operation not supported (socket type does not support accepting connections).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga323aaea59761a13a245ccccff604699c">IOT_SOCKET_ECONNRESET</a> = Connection reset by the peer.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga779e9d78c7981c0e9e936b757fae13eb">IOT_SOCKET_ECONNABORTED</a> = Connection aborted locally.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga89680f95cc39f750ae41aec878847b39">IOT_SOCKET_EAGAIN</a> = Operation would block or timed out (may be called again).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga82b741d2694c1955be09078780a34f5b">IOT_SOCKET_ERROR</a> = Unspecified error.</li>
</ul>
</dd></dl>
<p>The function <b>iotSocketAccept</b> accepts a connection request queued for a listening socket.</p>
<p >If a connection request is pending, <b>iotSocketAccept</b> removes the request from the queue, and creates a new socket for the connection. The original listening socket remains open and continues to queue new connection requests. The <em>socket</em> must be a socket of type <a class="el" href="group__iotSocketType.html#gacbec51e70b70979a6d8e0f46e245c357">IOT_SOCKET_SOCK_STREAM</a>.</p>
<p >In blocking mode, which is enabled by default, this function waits for a connection request. In non blocking mode, you must call the <b>iotSocketAccept</b> function again if the error code <code>IOT_SOCKET_EAGAIN</code> is returned.</p>
<p >The argument <em>socket</em> specifies a socket identification number returned from a previous call to <a class="el" href="group__iotSocketAPI.html#gac758b9287fb2121fb7067811aa7257b2">iotSocketCreate</a>.</p>
<p >The argument <em>ip</em> is a pointer to the buffer that will receive the IP address of the connection node. If the <em>ip</em> is <span class="XML-Token">NULL</span>, the IP address is not returned.</p>
<p >The argument <em>ip_len</em> is a pointer to the IP address length. It should initially contain the amount of space pointed to by <em>ip</em>. On return it contains the actual length of the address returned in bytes.</p>
<p >The argument <em>port</em> is a pointer to the buffer, that will receive the port number of the connection node. If the <em>port</em> is <span class="XML-Token">NULL</span>, the port number is not returned.</p>
<p ><b>Example:</b> </p><ul>
<li>see <a class="el" href="group__iotSocketAPI.html#ga1c34f803e04b807a7b7f895611702f75">iotSocketListen</a> </li>
</ul>

</div>
</div>
<a id="ga51dba6e1df39d9d044d5557e0bfcf5cb" name="ga51dba6e1df39d9d044d5557e0bfcf5cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga51dba6e1df39d9d044d5557e0bfcf5cb">&#9670;&nbsp;</a></span>iotSocketConnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t iotSocketConnect </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ip_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Connect a socket to a remote host. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket identification number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ip</td><td>pointer to remote IP address. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ip_len</td><td>length of 'ip' address in bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>remote port number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status information:<ul>
<li>0 = Operation successful.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga9355dbc6232ba07c4ef2127289b2ed33">IOT_SOCKET_ESOCK</a> = Invalid socket.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gafe6eb756474b724046d6bd0803d3be16">IOT_SOCKET_EINVAL</a> = Invalid argument.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga2e7a1d2993bffab99238298a87a0a74e">IOT_SOCKET_EALREADY</a> = Connection already in progress.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gae658d4db48367a7352f288aa44211703">IOT_SOCKET_EINPROGRESS</a> = Operation in progress.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gaff2ba06531a6c882932686bb2b6e3f34">IOT_SOCKET_EISCONN</a> = Socket is connected.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gaa6d88a9d0e865a660aa31085a9bc516f">IOT_SOCKET_ECONNREFUSED</a> = Connection rejected by the peer.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga779e9d78c7981c0e9e936b757fae13eb">IOT_SOCKET_ECONNABORTED</a> = Connection aborted locally.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga7f0805f981cf4b5afa18f8a45d9638bb">IOT_SOCKET_EADDRINUSE</a> = Address already in use.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gab3c76a773a76647415f113a26ec32897">IOT_SOCKET_ETIMEDOUT</a> = Operation timed out.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga82b741d2694c1955be09078780a34f5b">IOT_SOCKET_ERROR</a> = Unspecified error.</li>
</ul>
</dd></dl>
<p>The function <b>iotSocketConnect</b> assigns the address of the peer communication endpoint. The function behaves differently according to the type of socket:</p>
<ul>
<li><p class="startli"><a class="el" href="group__iotSocketType.html#gacbec51e70b70979a6d8e0f46e245c357">IOT_SOCKET_SOCK_STREAM</a> : A connection is established between the endpoints.</p>
<p class="startli">In blocking mode, which is enabled by default, this function waits for a connection to be established.</p>
<p class="startli">In non blocking mode, the function returns the error code <code>IOT_SOCKET_EINPROGRESS</code> and the connection is established asynchronously. Subsequent calls to <b>iotSocketConnect</b> for the same socket, before the connection is established, return the error code <code>IOT_SOCKET_EALREADY</code>. When the connection is established, the call to <b>iotSocketConnect</b> returns the error code <code>IOT_SOCKET_EISCONN</code>.</p>
</li>
<li><p class="startli"><a class="el" href="group__iotSocketType.html#ga930c520d329bafc27847f5183a9f48ce">IOT_SOCKET_SOCK_DGRAM</a> : An address filter is established between the endpoints.</p>
<p class="startli">The address filter is changed with another <b>iotSocketConnect</b> function call. If the socket is not yet bound, the system implicitly binds to a random dynamic port.</p>
</li>
</ul>
<p >The argument <em>socket</em> specifies a socket identification number returned from a previous call to <a class="el" href="group__iotSocketAPI.html#gac758b9287fb2121fb7067811aa7257b2">iotSocketCreate</a>.</p>
<p >The argument <em>ip</em> is a pointer to the buffer containing the IP address octets of the endpoint node.</p>
<p >The argument <em>ip_len</em> specifies the length of the IP address. The length is <span class="XML-Token">4</span> bytes for the IPv4 address and <span class="XML-Token">16</span> bytes for the IPv6 address.</p>
<p >The argument <em>port</em> specifies the port of the endpoint node. If the argument <em>port</em> is <span class="XML-Token">0</span>, the function returns error, because this port is reserved.</p>
<p ><b>Example:</b> </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> message[] = { <span class="stringliteral">&quot;The quick brown fox jumps over the lazy dog.&quot;</span> };</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> Echo_Client_Thread (<span class="keywordtype">void</span> *arg) {</div>
<div class="line">  uint8_t ip[4] = { 192U, 168U, 0U, 100U };</div>
<div class="line">  int32_t sock, res;</div>
<div class="line">  <span class="keywordtype">char</span> dbuf[120];</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">while</span> (1) {</div>
<div class="line">    sock = <a class="code hl_function" href="group__iotSocketAPI.html#gac758b9287fb2121fb7067811aa7257b2" title="Create a communication socket.">iotSocketCreate</a> (<a class="code hl_define" href="group__iotSocketAddressFamily.html#ga25c1a75f47d88c653b35f084474d5537" title="IPv4.">IOT_SOCKET_AF_INET</a>, <a class="code hl_define" href="group__iotSocketType.html#gacbec51e70b70979a6d8e0f46e245c357" title="Stream socket.">IOT_SOCKET_SOCK_STREAM</a>, <a class="code hl_define" href="group__iotSocketProtocol.html#gac9e564c101a8b0669c6e54496cf75655" title="TCP.">IOT_SOCKET_IPPROTO_TCP</a>);</div>
<div class="line"> </div>
<div class="line">    res = <a class="code hl_function" href="group__iotSocketAPI.html#ga51dba6e1df39d9d044d5557e0bfcf5cb" title="Connect a socket to a remote host.">iotSocketConnect</a> (sock, (uint8_t *)ip, <span class="keyword">sizeof</span>(ip), 7U);</div>
<div class="line">    <span class="keywordflow">if</span> (res == 0) {</div>
<div class="line">      <span class="keywordflow">while</span> (1) {</div>
<div class="line">        <a class="code hl_function" href="group__iotSocketAPI.html#gad00cb6fec02a5458ace3702b2725a110" title="Send data or check if data can be sent on a connected socket.">iotSocketSend</a> (sock, message, <span class="keyword">sizeof</span>(message));</div>
<div class="line">        res = <a class="code hl_function" href="group__iotSocketAPI.html#ga9b71bd827a43f2fed4331e8087915689" title="Receive data or check if data is available on a connected socket.">iotSocketRecv</a> (sock, dbuf, <span class="keyword">sizeof</span>(dbuf));</div>
<div class="line">        <span class="keywordflow">if</span> (res &lt; 0) {</div>
<div class="line">          <span class="keywordflow">break</span>;               <span class="comment">// Receive error</span></div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (res &gt; 0) {</div>
<div class="line">          <span class="keywordflow">if</span> (memcmp (dbuf, message, res) != 0) {</div>
<div class="line">            <span class="keywordflow">break</span>;             <span class="comment">// Message error, echoed message is not the same</span></div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">        osDelay (1000U);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <a class="code hl_function" href="group__iotSocketAPI.html#ga59fffdd940edfecaf226f9a2bd130dca" title="Close and release a socket.">iotSocketClose</a> (sock);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga9b71bd827a43f2fed4331e8087915689" name="ga9b71bd827a43f2fed4331e8087915689"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9b71bd827a43f2fed4331e8087915689">&#9670;&nbsp;</a></span>iotSocketRecv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t iotSocketRecv </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive data or check if data is available on a connected socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket identification number. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>pointer to buffer where data should be stored. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of buffer (in bytes), set len = 0 to check if data is available. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status information:<ul>
<li>number of bytes received (&gt;=0), if len != 0.</li>
<li>0 = Data is available (len = 0).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga9355dbc6232ba07c4ef2127289b2ed33">IOT_SOCKET_ESOCK</a> = Invalid socket.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gafe6eb756474b724046d6bd0803d3be16">IOT_SOCKET_EINVAL</a> = Invalid argument (pointer to buffer or length).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga4e98df589c7087e92642eefd2fd589f6">IOT_SOCKET_ENOTCONN</a> = Socket is not connected.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga323aaea59761a13a245ccccff604699c">IOT_SOCKET_ECONNRESET</a> = Connection reset by the peer.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga779e9d78c7981c0e9e936b757fae13eb">IOT_SOCKET_ECONNABORTED</a> = Connection aborted locally.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga89680f95cc39f750ae41aec878847b39">IOT_SOCKET_EAGAIN</a> = Operation would block or timed out (may be called again).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga82b741d2694c1955be09078780a34f5b">IOT_SOCKET_ERROR</a> = Unspecified error.</li>
</ul>
</dd></dl>
<p>The function <b>iotSocketRecv</b> receives incoming data that has been queued for the socket.</p>
<p >You can use this function with both, the stream and the datagram socket. It reads as much information as currently available up to the size of the buffer specified.</p>
<p >In blocking mode, which is enabled by default, this function waits for received data. In non blocking mode, you must call the <b>iotSocketRecv</b> function again if the error code <code>IOT_SOCKET_EAGAIN</code> is returned.</p>
<p >The argument <em>socket</em> specifies a socket identification number returned from a previous call to <a class="el" href="group__iotSocketAPI.html#gac758b9287fb2121fb7067811aa7257b2">iotSocketCreate</a>.</p>
<p >The argument <em>buf</em> is a pointer to the application data buffer for storing the data to. If the available data is too large to fit in the supplied application buffer <em>buf</em>, excess bytes are discarded in case of a datagram sockets. For stream sockets, the data is buffered internally so the application can retrieve all data by multiple calls of <b>iotSocketRecv</b> function.</p>
<p >The argument <em>len</em> specifies the size of the application data buffer.</p>
<dl class="section note"><dt>Note</dt><dd>The function can also be used to check if the socket has data available to read by specifying <span class="XML-Token">0</span> for argument <em>len</em> (argument <em>buf</em> is ignored). The function returns <span class="XML-Token">0</span> if data is available or error code otherwise. In blocking mode, the function waits until data is available, in non blocking mode the function returns instantly.</dd></dl>
<p><b>Example:</b> </p><ul>
<li>see <a class="el" href="group__iotSocketAPI.html#ga1c34f803e04b807a7b7f895611702f75">iotSocketListen</a> </li>
</ul>

</div>
</div>
<a id="ga7089918987d66d706e3733764e6bb44a" name="ga7089918987d66d706e3733764e6bb44a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7089918987d66d706e3733764e6bb44a">&#9670;&nbsp;</a></span>iotSocketRecvFrom()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t iotSocketRecvFrom </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>ip_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive data or check if data is available on a socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket identification number. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>pointer to buffer where data should be stored. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of buffer (in bytes), set len = 0 to check if data is available. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ip</td><td>pointer to buffer where remote source address shall be returned (NULL for none). </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ip_len</td><td>pointer to length of 'ip' (or NULL if 'ip' is NULL):<ul>
<li>length of supplied 'ip' on input.</li>
<li>length of stored 'ip' on output. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">port</td><td>pointer to buffer where remote source port shall be returned (NULL for none). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status information:<ul>
<li>number of bytes received (&gt;=0), if len != 0.</li>
<li>0 = Data is available (len = 0).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga9355dbc6232ba07c4ef2127289b2ed33">IOT_SOCKET_ESOCK</a> = Invalid socket.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gafe6eb756474b724046d6bd0803d3be16">IOT_SOCKET_EINVAL</a> = Invalid argument (pointer to buffer or length).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga4e98df589c7087e92642eefd2fd589f6">IOT_SOCKET_ENOTCONN</a> = Socket is not connected.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga323aaea59761a13a245ccccff604699c">IOT_SOCKET_ECONNRESET</a> = Connection reset by the peer.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga779e9d78c7981c0e9e936b757fae13eb">IOT_SOCKET_ECONNABORTED</a> = Connection aborted locally.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga89680f95cc39f750ae41aec878847b39">IOT_SOCKET_EAGAIN</a> = Operation would block or timed out (may be called again).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga82b741d2694c1955be09078780a34f5b">IOT_SOCKET_ERROR</a> = Unspecified error.</li>
</ul>
</dd></dl>
<p>The function <b>iotSocketRecvFrom</b> is used to receive data that has been queued for a socket.</p>
<p >It is normally used to receive messages on datagram sockets, but can also be used to receive a reliable, ordered stream of data on a connected stream sockets. It reads as much information as currently available up to the size of the buffer specified.</p>
<p >In blocking mode, which is enabled by default, this function waits for received data. In non blocking mode, you must call the <b>iotSocketRecv</b> function again if the error code <code>IOT_SOCKET_EAGAIN</code> is returned.</p>
<p >The argument <em>socket</em> specifies a socket identification number returned from a previous call to <a class="el" href="group__iotSocketAPI.html#gac758b9287fb2121fb7067811aa7257b2">iotSocketCreate</a>.</p>
<p >The argument <em>buf</em> is a pointer to the application data buffer for storing the data to. If the available data is too large to fit in the supplied application buffer <em>buf</em>, excess bytes are discarded in case of a datagram sockets. For stream sockets, the data is buffered internally so the application can retrieve all data by multiple calls of <b>iotSocketRecv</b> function.</p>
<p >The argument <em>len</em> specifies the size of the application data buffer.</p>
<p >The argument <em>ip</em> is a pointer to the buffer that will receive the IP address of the sender. If the <em>ip</em> is <span class="XML-Token">NULL</span>, the IP address is not returned.</p>
<p >The argument <em>ip_len</em> is a pointer to the IP address length. It should initially contain the amount of space pointed to by <em>ip</em>. On return it contains the actual length of the address returned in bytes.</p>
<p >The argument <em>port</em> is a pointer to the buffer, that will receive the port number of the sender. If the <em>port</em> is <span class="XML-Token">NULL</span>, the port number is not returned.</p>
<dl class="section note"><dt>Note</dt><dd>The function can also be used to check if the socket has data available to read by specifying <span class="XML-Token">0</span> for argument <em>len</em> (arguments <em>buf</em>, <em>ip</em>, <em>ip_len</em> and <em>port</em> are ignored). The function returns <span class="XML-Token">0</span> if data is available or error code otherwise. In blocking mode, the function waits until data is available, in non blocking mode the function returns instantly.</dd></dl>
<p><b>Example:</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> Echo_Server_Thread (<span class="keywordtype">void</span> *arg) {</div>
<div class="line">  uint8_t ip[4];</div>
<div class="line">  uint16_t port;</div>
<div class="line">  int32_t sock, res;</div>
<div class="line">  uint32_t ip_len;</div>
<div class="line">  <span class="keywordtype">char</span> dbuf[120];</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">while</span> (1) {</div>
<div class="line">    sock = <a class="code hl_function" href="group__iotSocketAPI.html#gac758b9287fb2121fb7067811aa7257b2" title="Create a communication socket.">iotSocketCreate</a> (<a class="code hl_define" href="group__iotSocketAddressFamily.html#ga25c1a75f47d88c653b35f084474d5537" title="IPv4.">IOT_SOCKET_AF_INET</a>, <a class="code hl_define" href="group__iotSocketType.html#ga930c520d329bafc27847f5183a9f48ce" title="Datagram socket.">IOT_SOCKET_SOCK_DGRAM</a>, <a class="code hl_define" href="group__iotSocketProtocol.html#gad1f0810ffd16aaf73e25c54d1f2b7f53" title="UDP.">IOT_SOCKET_IPPROTO_UDP</a>);</div>
<div class="line"> </div>
<div class="line">    ip[0] = 0U;                 <span class="comment">// Unspecified address</span></div>
<div class="line">    ip[1] = 0U;</div>
<div class="line">    ip[2] = 0U;</div>
<div class="line">    ip[3] = 0U;</div>
<div class="line">    port  = 7U;                 <span class="comment">// Standard port for Echo service</span></div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group__iotSocketAPI.html#gae38f9306e4e99a89785ce037ea7c8e80" title="Assign a local address to a socket.">iotSocketBind</a> (sock, (uint8_t *)ip, <span class="keyword">sizeof</span>(ip), port);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">      ip_len = <span class="keyword">sizeof</span>(ip);</div>
<div class="line">      res = <a class="code hl_function" href="group__iotSocketAPI.html#ga7089918987d66d706e3733764e6bb44a" title="Receive data or check if data is available on a socket.">iotSocketRecvFrom</a> (sock, dbuf, <span class="keyword">sizeof</span>(dbuf), (uint8_t *)ip, &amp;ip_len, &amp;port);</div>
<div class="line">      <span class="keywordflow">if</span> (res &lt; 0) {</div>
<div class="line">        <span class="keywordflow">break</span>;                  <span class="comment">// Error occurred</span></div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">if</span> (res &gt; 0) {            <span class="comment">// Echo the data</span></div>
<div class="line">        <a class="code hl_function" href="group__iotSocketAPI.html#ga3a6eef425315dfbe235ce8200c01e122" title="Send data or check if data can be sent on a socket.">iotSocketSendTo</a> (sock, dbuf, res, (uint8_t *)ip, ip_len, port);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <a class="code hl_function" href="group__iotSocketAPI.html#ga59fffdd940edfecaf226f9a2bd130dca" title="Close and release a socket.">iotSocketClose</a> (sock);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="gad00cb6fec02a5458ace3702b2725a110" name="gad00cb6fec02a5458ace3702b2725a110"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad00cb6fec02a5458ace3702b2725a110">&#9670;&nbsp;</a></span>iotSocketSend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t iotSocketSend </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send data or check if data can be sent on a connected socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket identification number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>pointer to buffer containing data to send. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of data (in bytes), set len = 0 to check if data can be sent. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status information:<ul>
<li>number of bytes sent (&gt;=0), if len != 0.</li>
<li>0 = Data can be sent (len = 0).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga9355dbc6232ba07c4ef2127289b2ed33">IOT_SOCKET_ESOCK</a> = Invalid socket.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gafe6eb756474b724046d6bd0803d3be16">IOT_SOCKET_EINVAL</a> = Invalid argument (pointer to buffer or length).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga4e98df589c7087e92642eefd2fd589f6">IOT_SOCKET_ENOTCONN</a> = Socket is not connected.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga323aaea59761a13a245ccccff604699c">IOT_SOCKET_ECONNRESET</a> = Connection reset by the peer.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga779e9d78c7981c0e9e936b757fae13eb">IOT_SOCKET_ECONNABORTED</a> = Connection aborted locally.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga89680f95cc39f750ae41aec878847b39">IOT_SOCKET_EAGAIN</a> = Operation would block or timed out (may be called again).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga82b741d2694c1955be09078780a34f5b">IOT_SOCKET_ERROR</a> = Unspecified error.</li>
</ul>
</dd></dl>
<p>The function <b>iotSocketSend</b> is used to send data on an already connected socket.</p>
<p >This function is normally used to send a reliable, ordered stream of data bytes on a stream sockets. It can also be used to send messages on datagram sockets.</p>
<p >The argument <em>socket</em> specifies a socket identification number returned from a previous call to <a class="el" href="group__iotSocketAPI.html#gac758b9287fb2121fb7067811aa7257b2">iotSocketCreate</a>.</p>
<p >The argument <em>buf</em> is a pointer to the application data buffer containing data to transmit. The buffer data length is not limited in size. If the data length is too large for one packet, the <b>iotSocketSend</b> function will fragment the data and send it in several successive data packets:</p><ul>
<li>In blocking mode, which is enabled by default, this function returns after the data has been successfully queued for transmission.</li>
<li>In non blocking mode, the function returns immediately without blocking the system.</li>
</ul>
<p >The argument <em>len</em> specifies the length of data in bytes.</p>
<p >Return value, when positive, represents the number of bytes sent, which can be less than <em>len</em>.</p>
<dl class="section note"><dt>Note</dt><dd>The function can also be used to check if the socket is ready to send data by specifying <span class="XML-Token">0</span> for argument <em>len</em> (argument <em>buf</em> is ignored). The function returns <span class="XML-Token">0</span> if the socket is writable or error code otherwise.</dd></dl>
<p><b>Example:</b> </p><ul>
<li>see <a class="el" href="group__iotSocketAPI.html#ga1c34f803e04b807a7b7f895611702f75">iotSocketListen</a> </li>
</ul>

</div>
</div>
<a id="ga3a6eef425315dfbe235ce8200c01e122" name="ga3a6eef425315dfbe235ce8200c01e122"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3a6eef425315dfbe235ce8200c01e122">&#9670;&nbsp;</a></span>iotSocketSendTo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t iotSocketSendTo </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ip_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send data or check if data can be sent on a socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket identification number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>pointer to buffer containing data to send. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of data (in bytes), set len = 0 to check if data can be sent. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ip</td><td>pointer to remote destination IP address. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ip_len</td><td>length of 'ip' address in bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>remote destination port number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status information:<ul>
<li>number of bytes sent (&gt;=0), if len != 0.</li>
<li>0 = Data can be sent (len = 0).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga9355dbc6232ba07c4ef2127289b2ed33">IOT_SOCKET_ESOCK</a> = Invalid socket.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gafe6eb756474b724046d6bd0803d3be16">IOT_SOCKET_EINVAL</a> = Invalid argument (pointer to buffer or length).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga4e98df589c7087e92642eefd2fd589f6">IOT_SOCKET_ENOTCONN</a> = Socket is not connected.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga323aaea59761a13a245ccccff604699c">IOT_SOCKET_ECONNRESET</a> = Connection reset by the peer.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga779e9d78c7981c0e9e936b757fae13eb">IOT_SOCKET_ECONNABORTED</a> = Connection aborted locally.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga89680f95cc39f750ae41aec878847b39">IOT_SOCKET_EAGAIN</a> = Operation would block or timed out (may be called again).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga82b741d2694c1955be09078780a34f5b">IOT_SOCKET_ERROR</a> = Unspecified error.</li>
</ul>
</dd></dl>
<p>The function <b>iotSocketSendTo</b> is used to send data.</p>
<p >It is normally used to send messages on a datagram sockets, but can also be used to send data on a connected stream sockets.</p>
<p >If the datagram socket is not yet bound, the system implicitly binds to a random dynamic port.</p>
<p >The argument <em>socket</em> specifies a socket identification number returned from a previous call to <a class="el" href="group__iotSocketAPI.html#gac758b9287fb2121fb7067811aa7257b2">iotSocketCreate</a>.</p>
<p >The argument <em>buf</em> is a pointer to the application data buffer containing data to transmit. The buffer data length is not limited in size. If the data length is too large for one packet, the <b>iotSocketSend</b> function will fragment the data and send it in several successive data packets:</p><ul>
<li>In blocking mode, which is enabled by default, this function returns after the data has been successfully queued for transmission.</li>
<li>In non blocking mode, the function returns immediately without blocking the system.</li>
</ul>
<p >The argument <em>len</em> specifies the length of data in bytes.</p>
<p >The argument <em>ip</em> is a pointer to the buffer containing the IP address octets of the endpoint node.</p>
<p >The argument <em>ip_len</em> specifies the length of the IP address. The length is <span class="XML-Token">4</span> bytes for the IPv4 address and <span class="XML-Token">16</span> bytes for the IPv6 address.</p>
<p >The argument <em>port</em> specifies the port of the endpoint node. If the argument <em>port</em> is <span class="XML-Token">0</span>, the function returns error, because this port is reserved.</p>
<p >For the stream sockets, arguments <em>ip</em>, <em>ip_len</em> and <em>port</em> are ignored.</p>
<p >Return value, when positive, represents the number of bytes sent, which can be less than <em>len</em>.</p>
<dl class="section note"><dt>Note</dt><dd>The function can also be used to check if the socket is ready to send data by specifying <span class="XML-Token">0</span> for argument <em>len</em> (arguments <em>buf</em>, <em>ip</em>, <em>ip_len</em> and <em>port</em> are ignored). The function returns <span class="XML-Token">0</span> if the socket is writable or error code otherwise.</dd></dl>
<p><b>Example:</b> </p><ul>
<li>see <a class="el" href="group__iotSocketAPI.html#ga7089918987d66d706e3733764e6bb44a">iotSocketRecvFrom</a> </li>
</ul>

</div>
</div>
<a id="gabd13e6f8fc094926809e789274f08dfe" name="gabd13e6f8fc094926809e789274f08dfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabd13e6f8fc094926809e789274f08dfe">&#9670;&nbsp;</a></span>iotSocketGetSockName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t iotSocketGetSockName </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>ip_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve local IP address and port of a socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket identification number. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ip</td><td>pointer to buffer where local address shall be returned (NULL for none). </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ip_len</td><td>pointer to length of 'ip' (or NULL if 'ip' is NULL):<ul>
<li>length of supplied 'ip' on input.</li>
<li>length of stored 'ip' on output. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">port</td><td>pointer to buffer where local port shall be returned (NULL for none). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status information:<ul>
<li>0 = Operation successful.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga9355dbc6232ba07c4ef2127289b2ed33">IOT_SOCKET_ESOCK</a> = Invalid socket.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gafe6eb756474b724046d6bd0803d3be16">IOT_SOCKET_EINVAL</a> = Invalid argument (pointer to buffer or length).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga82b741d2694c1955be09078780a34f5b">IOT_SOCKET_ERROR</a> = Unspecified error.</li>
</ul>
</dd></dl>
<p>The function <b>iotSocketGetSockName</b> retrieves the local IP address and port for a socket.</p>
<p >The argument <em>socket</em> specifies a socket identification number returned from a previous call to <a class="el" href="group__iotSocketAPI.html#gac758b9287fb2121fb7067811aa7257b2">iotSocketCreate</a>.</p>
<p >The argument <em>ip</em> is a pointer to the buffer that will receive the local IP address. If the <em>ip</em> is <span class="XML-Token">NULL</span>, the local IP address is not returned.</p>
<p >The argument <em>ip_len</em> is a pointer to the IP address length. It should initially contain the amount of space pointed to by <em>ip</em>. On return it contains the actual length of the address returned in bytes.</p>
<p >The argument <em>port</em> is a pointer to the buffer, that will receive the local port number. If the <em>port</em> is <span class="XML-Token">NULL</span>, the local port number is not returned.</p>
<p ><b>Example:</b> </p><div class="fragment"><div class="line"><span class="keyword">static</span> uint8_t  local_ip[4];    <span class="comment">// Socket address and port</span></div>
<div class="line"><span class="keyword">static</span> uint16_t local_port;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> get_socket_local_info (<span class="keywordtype">void</span>) {</div>
<div class="line">  uint32_t ip_len;</div>
<div class="line"> </div>
<div class="line">  ip_len = <span class="keyword">sizeof</span>(local_ip);</div>
<div class="line">  <a class="code hl_function" href="group__iotSocketAPI.html#gabd13e6f8fc094926809e789274f08dfe" title="Retrieve local IP address and port of a socket.">iotSocketGetSockName</a> (sock, (uint8_t *)local_ip, &amp;ip_len, &amp;local_port);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga251ae2c799a0eddd122fc1bf530ad7be" name="ga251ae2c799a0eddd122fc1bf530ad7be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga251ae2c799a0eddd122fc1bf530ad7be">&#9670;&nbsp;</a></span>iotSocketGetPeerName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t iotSocketGetPeerName </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>ip_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve remote IP address and port of a socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket identification number. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ip</td><td>pointer to buffer where remote address shall be returned (NULL for none). </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ip_len</td><td>pointer to length of 'ip' (or NULL if 'ip' is NULL):<ul>
<li>length of supplied 'ip' on input.</li>
<li>length of stored 'ip' on output. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">port</td><td>pointer to buffer where remote port shall be returned (NULL for none). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status information:<ul>
<li>0 = Operation successful.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga9355dbc6232ba07c4ef2127289b2ed33">IOT_SOCKET_ESOCK</a> = Invalid socket.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gafe6eb756474b724046d6bd0803d3be16">IOT_SOCKET_EINVAL</a> = Invalid argument (pointer to buffer or length).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga4e98df589c7087e92642eefd2fd589f6">IOT_SOCKET_ENOTCONN</a> = Socket is not connected.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga82b741d2694c1955be09078780a34f5b">IOT_SOCKET_ERROR</a> = Unspecified error.</li>
</ul>
</dd></dl>
<p>The function <b>iotSocketGetPeerName</b> retrieves the IP address and port of the peer to which a socket is connected.</p>
<p >The argument <em>socket</em> specifies a socket identification number returned from a previous call to <a class="el" href="group__iotSocketAPI.html#gac758b9287fb2121fb7067811aa7257b2">iotSocketCreate</a>.</p>
<p >The argument <em>ip</em> is a pointer to the buffer that will receive the IP address of the peer. If the <em>ip</em> is <span class="XML-Token">NULL</span>, the IP address is not returned.</p>
<p >The argument <em>ip_len</em> is a pointer to the IP address length. It should initially contain the amount of space pointed to by <em>ip</em>. On return it contains the actual length of the address returned in bytes.</p>
<p >The argument <em>port</em> is a pointer to the buffer, that will receive the port number of the peer. If the <em>port</em> is <span class="XML-Token">NULL</span>, the port number is not returned.</p>
<p ><b>Example:</b> </p><div class="fragment"><div class="line"><span class="keyword">static</span> uint8_t  peer_ip[4];    <span class="comment">// Socket address and port</span></div>
<div class="line"><span class="keyword">static</span> uint16_t peer_port;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> get_socket_peer_info (<span class="keywordtype">void</span>) {</div>
<div class="line">  uint32_t ip_len;</div>
<div class="line"> </div>
<div class="line">  ip_len = <span class="keyword">sizeof</span>(peer_ip);</div>
<div class="line">  <a class="code hl_function" href="group__iotSocketAPI.html#ga251ae2c799a0eddd122fc1bf530ad7be" title="Retrieve remote IP address and port of a socket.">iotSocketGetPeerName</a> (sock, (uint8_t *)peer_ip, &amp;ip_len, &amp;peer_port);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga22311af9784ef6317ce092ccf392d049" name="ga22311af9784ef6317ce092ccf392d049"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga22311af9784ef6317ce092ccf392d049">&#9670;&nbsp;</a></span>iotSocketGetOpt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t iotSocketGetOpt </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>opt_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>opt_val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>opt_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get socket option. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket identification number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">opt_id</td><td>option identifier. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">opt_val</td><td>pointer to the buffer that will receive the option value. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">opt_len</td><td>pointer to length of the option value:<ul>
<li>length of buffer on input.</li>
<li>length of data on output. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status information:<ul>
<li>0 = Operation successful.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga9355dbc6232ba07c4ef2127289b2ed33">IOT_SOCKET_ESOCK</a> = Invalid socket.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gafe6eb756474b724046d6bd0803d3be16">IOT_SOCKET_EINVAL</a> = Invalid argument.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gaac9dd14cb3288f8e03a4e7a8ba25bfca">IOT_SOCKET_ENOTSUP</a> = Operation not supported.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga82b741d2694c1955be09078780a34f5b">IOT_SOCKET_ERROR</a> = Unspecified error.</li>
</ul>
</dd></dl>
<p>The function <b>iotSocketGetOpt</b> retrieves options for a socket.</p>
<p >The argument <em>socket</em> specifies a socket identification number returned from a previous call to <a class="el" href="group__iotSocketAPI.html#gac758b9287fb2121fb7067811aa7257b2">iotSocketCreate</a>.</p>
<p >The argument <em>opt_id</em> is the socket option for which the value is to be retrieved. The following socket options are supported: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Option   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group__iotSocketOptions.html#ga76690608d0b534dfd7c5d3f86100e8c2">IOT_SOCKET_SO_RCVTIMEO</a>   </td><td class="markdownTableBodyLeft">Timeout for receiving in blocking mode    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group__iotSocketOptions.html#ga5fa39acb5e480bf6c92e4d2ee1765600">IOT_SOCKET_SO_SNDTIMEO</a>   </td><td class="markdownTableBodyLeft">Timeout for sending in blocking mode    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group__iotSocketOptions.html#gacd75f5b079c35096b6e5a90a9d4cc116">IOT_SOCKET_SO_KEEPALIVE</a>   </td><td class="markdownTableBodyLeft">Keep-alive mode for the stream socket    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group__iotSocketOptions.html#gae18aea4c415256d32825eb8b719925c7">IOT_SOCKET_SO_TYPE</a>   </td><td class="markdownTableBodyLeft">Type of the socket (stream or datagram)   </td></tr>
</table>
<p >The argument <em>opt_val</em> points to the buffer that will receive the value of the <em>opt_id</em>.</p>
<p >The argument <em>opt_len</em> contains the length of the buffer at the input and returns the length of the option information on the output.</p>
<p ><b>Example:</b> </p><div class="fragment"><div class="line">uint32_t type;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="group__iotSocketAPI.html#ga22311af9784ef6317ce092ccf392d049" title="Get socket option.">iotSocketGetOpt</a> (sock, <a class="code hl_define" href="group__iotSocketOptions.html#gae18aea4c415256d32825eb8b719925c7" title="Socket Type (Get only); opt_val = &amp;socket_type, opt_len = sizeof(socket_type), socket_type (integer):...">IOT_SOCKET_SO_TYPE</a>, &amp;type, <span class="keyword">sizeof</span>(type));</div>
<div class="line"><span class="keywordflow">if</span> (type == <a class="code hl_define" href="group__iotSocketType.html#gacbec51e70b70979a6d8e0f46e245c357" title="Stream socket.">IOT_SOCKET_SOCK_STREAM</a>) {</div>
<div class="line">  <span class="comment">// Stream socket</span></div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">if</span> (type == <a class="code hl_define" href="group__iotSocketType.html#ga930c520d329bafc27847f5183a9f48ce" title="Datagram socket.">IOT_SOCKET_SOCK_DGRAM</a>) {</div>
<div class="line">  <span class="comment">// Datagram socket</span></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="gaa6b5735b9bc67859126535b09f81f664" name="gaa6b5735b9bc67859126535b09f81f664"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa6b5735b9bc67859126535b09f81f664">&#9670;&nbsp;</a></span>iotSocketSetOpt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t iotSocketSetOpt </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>opt_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>opt_val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>opt_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set socket option. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket identification number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">opt_id</td><td>option identifier. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">opt_val</td><td>pointer to the option value. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">opt_len</td><td>length of the option value in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status information:<ul>
<li>0 = Operation successful.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga9355dbc6232ba07c4ef2127289b2ed33">IOT_SOCKET_ESOCK</a> = Invalid socket.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gafe6eb756474b724046d6bd0803d3be16">IOT_SOCKET_EINVAL</a> = Invalid argument.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gaac9dd14cb3288f8e03a4e7a8ba25bfca">IOT_SOCKET_ENOTSUP</a> = Operation not supported.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga82b741d2694c1955be09078780a34f5b">IOT_SOCKET_ERROR</a> = Unspecified error.</li>
</ul>
</dd></dl>
<p>The function <b>iotSocketSetOpt</b> sets options for a socket.</p>
<p >The argument <em>socket</em> specifies a socket identification number returned from a previous call to <a class="el" href="group__iotSocketAPI.html#gac758b9287fb2121fb7067811aa7257b2">iotSocketCreate</a>.</p>
<p >The argument <em>opt_id</em> is the socket option for which the value is to be set. The following socket options are supported: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Option   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group__iotSocketOptions.html#ga972b3227d315b628803d9462b26a89ee">IOT_SOCKET_IO_FIONBIO</a>   </td><td class="markdownTableBodyLeft">Non-blocking mode for the socket    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group__iotSocketOptions.html#ga76690608d0b534dfd7c5d3f86100e8c2">IOT_SOCKET_SO_RCVTIMEO</a>   </td><td class="markdownTableBodyLeft">Timeout for receiving in blocking mode    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group__iotSocketOptions.html#ga5fa39acb5e480bf6c92e4d2ee1765600">IOT_SOCKET_SO_SNDTIMEO</a>   </td><td class="markdownTableBodyLeft">Timeout for sending in blocking mode    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group__iotSocketOptions.html#gacd75f5b079c35096b6e5a90a9d4cc116">IOT_SOCKET_SO_KEEPALIVE</a>   </td><td class="markdownTableBodyLeft">Keep-alive mode for the stream socket   </td></tr>
</table>
<p >The argument <em>opt_val</em> points to the buffer containing the value of the <em>opt_id</em>.</p>
<p >The argument <em>opt_len</em> tells the exact length of the option.</p>
<p ><b>Example:</b> </p><div class="fragment"><div class="line">uint32_t nonblocking = 0U;    <span class="comment">// Blocking mode</span></div>
<div class="line">uint32_t timeout = 10000U;    <span class="comment">// Timeout 10 seconds</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="group__iotSocketAPI.html#gaa6b5735b9bc67859126535b09f81f664" title="Set socket option.">iotSocketSetOpt</a> (sock, <a class="code hl_define" href="group__iotSocketOptions.html#ga972b3227d315b628803d9462b26a89ee" title="Non-blocking I/O (Set only, default = 0); opt_val = &amp;nbio, opt_len = sizeof(nbio),...">IOT_SOCKET_IO_FIONBIO</a>, &amp;nonblocking, <span class="keyword">sizeof</span>(nonblocking));</div>
<div class="line"><a class="code hl_function" href="group__iotSocketAPI.html#gaa6b5735b9bc67859126535b09f81f664" title="Set socket option.">iotSocketSetOpt</a> (sock, <a class="code hl_define" href="group__iotSocketOptions.html#ga76690608d0b534dfd7c5d3f86100e8c2" title="Receive timeout in ms (default = 0); opt_val = &amp;timeout, opt_len = sizeof(timeout)">IOT_SOCKET_SO_RCVTIMEO</a>, &amp;timeout, <span class="keyword">sizeof</span>(timeout));</div>
<div class="line"><a class="code hl_function" href="group__iotSocketAPI.html#gaa6b5735b9bc67859126535b09f81f664" title="Set socket option.">iotSocketSetOpt</a> (sock, <a class="code hl_define" href="group__iotSocketOptions.html#ga5fa39acb5e480bf6c92e4d2ee1765600" title="Send timeout in ms (default = 0); opt_val = &amp;timeout, opt_len = sizeof(timeout)">IOT_SOCKET_SO_SNDTIMEO</a>, &amp;timeout, <span class="keyword">sizeof</span>(timeout));</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga59fffdd940edfecaf226f9a2bd130dca" name="ga59fffdd940edfecaf226f9a2bd130dca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga59fffdd940edfecaf226f9a2bd130dca">&#9670;&nbsp;</a></span>iotSocketClose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t iotSocketClose </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close and release a socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket identification number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status information:<ul>
<li>0 = Operation successful.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga9355dbc6232ba07c4ef2127289b2ed33">IOT_SOCKET_ESOCK</a> = Invalid socket.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga89680f95cc39f750ae41aec878847b39">IOT_SOCKET_EAGAIN</a> = Operation would block (may be called again).</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga82b741d2694c1955be09078780a34f5b">IOT_SOCKET_ERROR</a> = Unspecified error.</li>
</ul>
</dd></dl>
<p>The function <b>iotSocketClose</b> closes an existing socket and releases the socket descriptor. Further references to <em>socket</em> fail with <code>IOT_SOCKET_EINVAL</code> error code.</p>
<p >The argument <em>socket</em> specifies a socket identification number returned from a previous call to <a class="el" href="group__iotSocketAPI.html#gac758b9287fb2121fb7067811aa7257b2">iotSocketCreate</a>.</p>
<p >In blocking mode, which is enabled by default, this function will wait until a socket is closed. In non blocking mode, you must call the <b>iotSocketClose</b> function again if the error code <code>IOT_SOCKET_EAGAIN</code> is returned.</p>
<p ><b>Example:</b> </p><ul>
<li>see <a class="el" href="group__iotSocketAPI.html#ga1c34f803e04b807a7b7f895611702f75">iotSocketListen</a> </li>
</ul>

</div>
</div>
<a id="ga1f60dda886640137dead0622fdff9a5e" name="ga1f60dda886640137dead0622fdff9a5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1f60dda886640137dead0622fdff9a5e">&#9670;&nbsp;</a></span>iotSocketGetHostByName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t iotSocketGetHostByName </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>af</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>ip_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve host IP address from host name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>host name. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">af</td><td>address family. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ip</td><td>pointer to buffer where resolved IP address shall be returned. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ip_len</td><td>pointer to length of 'ip':<ul>
<li>length of supplied 'ip' on input.</li>
<li>length of stored 'ip' on output. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status information:<ul>
<li>0 = Operation successful.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gafe6eb756474b724046d6bd0803d3be16">IOT_SOCKET_EINVAL</a> = Invalid argument.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gaac9dd14cb3288f8e03a4e7a8ba25bfca">IOT_SOCKET_ENOTSUP</a> = Operation not supported.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gab3c76a773a76647415f113a26ec32897">IOT_SOCKET_ETIMEDOUT</a> = Operation timed out.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#gae2d95d73b7e15f6653cf0da38810e58d">IOT_SOCKET_EHOSTNOTFOUND</a> = Host not found.</li>
<li><a class="el" href="group__iotSocketReturnCodes.html#ga82b741d2694c1955be09078780a34f5b">IOT_SOCKET_ERROR</a> = Unspecified error.</li>
</ul>
</dd></dl>
<p>The function <b>iotSocketGetHostByName</b> retrieves host information corresponding to a host name from a host database.</p>
<p >It does this by sending DNS requests to the DNS server. The IP address of the DNS server is specified in the network interface configuration or can be obtained from the DHCP server for the local area network.</p>
<p >The argument <em>name</em> is a pointer to the <span class="XML-Token">null</span>-terminated name of the host to resolve.</p>
<p >The argument <em>af</em> specifies the address family, that is, which type of IP address you want to resolve. The following values are supported: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Family   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group__iotSocketAddressFamily.html#ga25c1a75f47d88c653b35f084474d5537">IOT_SOCKET_AF_INET</a>   </td><td class="markdownTableBodyLeft">Resolve the IPv4 address    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group__iotSocketAddressFamily.html#ga12cc48c0257c8e3f9a422040fd963923">IOT_SOCKET_AF_INET6</a>   </td><td class="markdownTableBodyLeft">Resolve the IPv6 address   </td></tr>
</table>
<p >The argument <em>ip</em> is a pointer to the buffer that will receive the resolved IP address of the host. If the argument <em>ip</em> is <span class="XML-Token">NULL</span>, the function returns error.</p>
<p >The argument <em>ip_len</em> is a pointer to the IP address length. It should initially contain the amount of space pointed to by <em>ip</em>. On return it contains the actual length of the address returned in bytes. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
	Copyright &copy; 2019-2022 Arm Limited (or its affiliates). All rights reserved.
	<!-- Use script below for auto-inserting date, project name, version, etc  -->
	<!-- <script type="text/javascript">
        writeFooter.call(this);
    </script> -->
    </li>
  </ul>
</div>
</body>
</html>
